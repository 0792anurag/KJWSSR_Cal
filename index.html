<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Krishna Jewellery Calculator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #fdf6e3;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #222;
    }
    img {
      width: 250px;
      margin-top: 20px;
      border-radius: 12px;
    }
    h1 {
      color: #b58900;
    }
    .container {
      background: #fff3e0;
      margin: 30px auto;
      padding: 20px;
      border-radius: 16px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    label, select, input {
      display: block;
      width: 100%;
      margin: 12px 0;
      font-size: 16px;
    }
    input, select {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      padding: 12px;
      background: #b58900;
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
      width: 100%;
    }
    .result {
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
      color: #333;
      text-align: left;
      line-height: 1.6;
    }
    .social {
      margin-top: 10px;
      font-size: 14px;
    }
    .social img {
      width: 24px;
      vertical-align: middle;
      margin: 0 5px;
    }
    .source {
      font-size: 12px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <img src="logo.jpg" alt="Krishna Jewellery Workshop" />
  <h1>Krishna Jewellery Workshop</h1>

  <div class="social">
    <a href="https://www.facebook.com/raytarun362" target="_blank">
      <img src="facebook-new.png" alt="Facebook">
    </a>
    <a href="https://www.instagram.com/krishna_jewellery_workshop_kdp" target="_blank">
      <img src="instagram-new.png" alt="Instagram">
    </a>
    <a href="https://g.co/kgs/HRLo7DF" target="_blank">
      <img src="google-logo.png" alt="Google">
    </a>
  </div>

  <div id="liveRate24k">Fetching 24K Rate...</div>
  <div class="container">
    <form id="calculator-form">
      <label for="mode">Select Calculation Mode:</label>
      <select id="mode" required>
        <option value="calculateCharge">Calculate Making Charge</option>
        <option value="calculateWeight">Calculate Weight</option>
        <option value="zeroMakingCharge">0 Making Charge (Special Offer)</option>
      </select>

      <label for="totalPrice">Total Price Paid (₹ incl. GST)</label>
      <input type="number" id="totalPrice" placeholder="e.g. 60200" step="0.01" min="0" required />

      <label for="rate">Gold/Silver Rate (₹ per 10g)</label>
      <input type="number" id="rate" placeholder="e.g. 73000" step="0.01" min="0" required />

      <div id="optionalInput">
        <label id="dynamicLabel" for="dynamicValue">Gold/Silver Weight (g)</label>
        <input type="number" id="dynamicValue" placeholder="e.g. 7.250" step="0.001" min="0" />
      </div>

      <p><strong>GST Rate: 3% (Fixed)</strong></p>
      <button type="submit" id="calculateButton">Calculate</button>
    </form>

    <div class="result" id="result"></div>
    <div class="source">
      Source: <a href="https://www.tanishq.co.in/gold-rate.html?lang=en_IN" target="_blank">Tanishq Gold Rates</a>
    </div>
  </div>

  <script>
    const modeSelect    = document.getElementById("mode");
    const totalInput    = document.getElementById("totalPrice");
    const rateInput     = document.getElementById("rate");
    const optionalGroup = document.getElementById("optionalInput");
    const dynamicLabel  = document.getElementById("dynamicLabel");
    const dynamicValue  = document.getElementById("dynamicValue");
    const calculateBtn  = document.getElementById("calculateButton");
    const form          = document.getElementById("calculator-form");
    const resultDiv     = document.getElementById("result");

    function resetFields() {
      totalInput.value = "";
      rateInput.value  = "";
      dynamicValue.value = "";
      resultDiv.textContent = "";
    }

    function updateMode() {
      resetFields();
      const mode = modeSelect.value;
      if (mode === "zeroMakingCharge") {
        optionalGroup.style.display = "none";
        calculateBtn.textContent = "Calculate Weight (0 Making Charge)";
      } else {
        optionalGroup.style.display = "block";
        if (mode === "calculateCharge") {
          dynamicLabel.textContent = "Gold/Silver Weight (g)";
          dynamicValue.placeholder = "e.g. 7.250";
          calculateBtn.textContent = "Calculate Making Charge";
        } else {
          dynamicLabel.textContent = "Making Charge (₹ per Gram)";
          dynamicValue.placeholder = "e.g. 725";
          calculateBtn.textContent = "Calculate Weight";
        }
      }
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const mode = modeSelect.value;
      const total = parseFloat(totalInput.value);
      const rate10 = parseFloat(rateInput.value);
      const gstRate = 3;
      if (isNaN(total) || isNaN(rate10) || total <= 0 || rate10 <= 0) {
        resultDiv.textContent = "Enter valid positive values for price and rate.";
        return;
      }
      const priceBeforeGst = total / (1 + gstRate/100);
      const rateGram = rate10 / 10;
      let output = "";

      if (mode === "calculateCharge") {
        const weight = parseFloat(dynamicValue.value);
        if (isNaN(weight) || weight <= 0) {
          resultDiv.textContent = "Enter valid weight.";
          return;
        }
        const charge = (priceBeforeGst - (rateGram * weight)) / weight;
        output = `Making Charge per Gram: ₹${charge.toFixed(2)}`;
      }
      else if (mode === "calculateWeight") {
        const charge = parseFloat(dynamicValue.value);
        if (isNaN(charge) || charge < 0) {
          resultDiv.textContent = "Enter valid making charge.";
          return;
        }
        const weight = priceBeforeGst / (rateGram + charge);
        output = `Gold/Silver Weight: ${weight.toFixed(3)} g`;
      }
      else { // zeroMakingCharge
        const weight = priceBeforeGst / rateGram;
        output = `Gold/Silver Weight: ${weight.toFixed(3)} g`;
      }

      resultDiv.textContent = output;
    });

    modeSelect.addEventListener("change", updateMode);
    updateMode();
  </script>
</body>
</html>
